<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PWHL Team Personality Test</title>
<meta property="og:title" content="PWHL Team Personality Test ‚ú®" />
<meta property="og:description" content="Which PWHL team are you? Take the quiz to find out!" />
<meta property="og:image" content="https://365hockeygirl.github.io/pwhl-quiz/preview.png" />
<meta property="og:url" content="https://365hockeygirl.github.io/pwhl-quiz/pwhl-team-picker.html" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://365hockeygirl.github.io/pwhl-quiz/preview.png" />
<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Inter:wght@400;500&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #5170ff, #ff66c4);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px 16px;
    transition: background 1.2s ease;
  }

  body.result-mode {
    background: #000;
  }
  
.share-buttons {
  margin-bottom: 24px;
}

.share-btn {
  background: rgba(255,255,255,0.15);
  border: 1.5px solid rgba(255,255,255,0.5);
  color: #fff;
  padding: 10px 16px;
  border-radius: 10px;
  margin: 4px;
  cursor: pointer;
  font-family: 'Inter', sans-serif;
}

.share-btn:hover {
  background: rgba(255,255,255,0.3);
}

  #sparkle-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }

  .quiz {
    position: relative;
    z-index: 1;
    max-width: 520px;
    width: 100%;
  }

  h1 {
    font-family: 'Lora', serif;
    font-size: 26px;
    font-weight: 600;
    color: #fff;
    margin-bottom: 6px;
    text-align: center;
  }

  .subtitle {
    font-size: 14px;
    color: rgba(255,255,255,0.75);
    text-align: center;
    margin-bottom: 32px;
  }

  .progress {
    display: flex;
    gap: 6px;
    margin-bottom: 28px;
  }

  .progress-dot {
    flex: 1;
    height: 3px;
    background: rgba(255,255,255,0.3);
    border-radius: 99px;
    transition: background 0.3s;
  }

  .progress-dot.done { background: #fff; }

  .question-num {
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: rgba(255,255,255,0.75);
    margin-bottom: 8px;
  }

  .question-text {
    font-family: 'Lora', serif;
    font-size: 20px;
    color: #fff;
    margin-bottom: 20px;
    line-height: 1.4;
  }

  .options {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .opt {
    background: rgba(255,255,255,0.15);
    border: 1.5px solid rgba(255,255,255,0.35);
    border-radius: 10px;
    padding: 12px 16px;
    cursor: pointer;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    color: #fff;
    text-align: left;
    transition: border-color 0.2s, background 0.2s;
    line-height: 1.4;
    width: 100%;
  }

  .opt:hover { border-color: #fff; background: rgba(255,255,255,0.25); }

  .opt.selected {
    border-color: #fff;
    background: rgba(255,255,255,0.3);
    font-weight: 500;
  }

  .opt .opt-sub {
    display: block;
    font-size: 12px;
    color: rgba(255,255,255,0.65);
    margin-top: 2px;
    font-weight: 400;
  }

  .btn-next {
    margin-top: 20px;
    width: 100%;
    padding: 13px;
    background: #fff;
    color: #5170ff;
    border: none;
    border-radius: 10px;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .btn-next:disabled { opacity: 0.4; cursor: not-allowed; }
  
  /* SOCIAL FOOTER */
.social-footer {
  display: flex;
  justify-content: center;
  gap: 18px;
  margin: 28px 0 10px;
}

.social-footer a {
  width: 42px;
  height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  color: white;
  text-decoration: none;

  background: linear-gradient(135deg, #5170ff, #ff66c4);
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.social-footer a:hover {
  transform: translateY(-2px);
  opacity: 0.85;
}

.social-footer svg {
  width: 20px;
  height: 20px;
}

  .result { display: none; text-align: center; }

  .result-logo {
    width: 120px;
    height: 120px;
    object-fit: contain;
    margin: 0 auto 16px;
    display: block;
  }

  .result h2 {
    font-family: 'Lora', serif;
    font-size: 28px;
    color: #fff;
    margin-bottom: 10px;
  }

  .result p {
    font-size: 14px;
    color: rgba(255,255,255,0.8);
    line-height: 1.7;
    margin-bottom: 28px;
    max-width: 380px;
    margin-left: auto;
    margin-right: auto;
  }


    color: rgba(255,255,255,0.65);
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 3px;
  }

  .a-value {
    font-size: 14px;
    color: #fff;
    font-weight: 500;
  }

  .a-label {
    color: rgba(255,255,255,0.65);
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 3px;
  }

  .a-value {
    font-size: 14px;
    color: #fff;
    font-weight: 500;
  }

  .loading {
    display: none;
    text-align: center;
    padding: 60px 0;
  }

  .loading-text {
    font-family: 'Lora', serif;
    font-size: 24px;
    color: #fff;
    line-height: 1.6;
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid rgba(255,255,255,0.8);
    width: 0;
    margin: 0 auto;
    animation: typewriter 2s steps(40) 0.3s forwards, blink 0.7s step-end infinite;
  }

  .loading-sig {
    font-family: 'Lora', serif;
    font-style: italic;
    font-size: 18px;
    color: rgba(255,255,255,0.75);
    margin-top: 14px;
    opacity: 0;
    animation: fadeIn 0.5s ease 2.4s forwards;
  }

  @keyframes typewriter {
    from { width: 0; }
    to   { width: 29ch; }
  }

  @keyframes blink {
    50% { border-color: transparent; }
  }

  @keyframes fadeIn {
    to { opacity: 1; }
  }

  .spiral-container {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto;
  }

  .btn-subscribe {
    display: inline-block;
    background: linear-gradient(135deg, #5170ff, #ff66c4);
    color: #fff;
    text-decoration: none;
    padding: 12px 28px;
    border-radius: 10px;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    margin-bottom: 10px;
  }

  .btn-subscribe:hover { opacity: 0.85; }

  .btn-restart {
    background: transparent;
    border: 1.5px solid rgba(255,255,255,0.6);
    color: #fff;
    padding: 10px 28px;
    border-radius: 10px;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    cursor: pointer;
  }

  .btn-restart:hover { background: rgba(255,255,255,0.1); }
  
  /* FLOAT + HALO EFFECT FOR RESULT LOGO */

.result-logo {
  position: relative;
  z-index: 1;
  animation: logoFloat 4s ease-in-out infinite;
}

/* glowing gradient halo behind logo */
.result-logo::before {
  content: "";
  position: absolute;
  inset: -18px;
  border-radius: 50%;
  z-index: -1;

  background: radial-gradient(
    circle,
    rgba(255,102,196,0.6) 0%,
    rgba(81,112,255,0.45) 40%,
    rgba(255,255,255,0.15) 65%,
    transparent 75%
  );

  filter: blur(12px);
  animation: haloPulse 5s ease-in-out infinite;
}

/* floating motion */
@keyframes logoFloat {
  0%, 100% { transform: translateY(0px); }
  50%      { transform: translateY(-10px); }
}

/* gentle glow pulse */
@keyframes haloPulse {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50%      { opacity: 1;   transform: scale(1.08); }
}

.result-logo {
  filter: drop-shadow(0 0 18px rgba(255,102,196,0.6));
}

  /* Result screen answer summaries with gradient accents */
  .answer-summary {
    background: rgba(255,255,255,0.07);
    border: 1.5px solid transparent;
    border-image: linear-gradient(135deg, #5170ff, #ff66c4) 1;
    border-radius: 10px;
    padding: 14px 16px;
    margin-bottom: 8px;
  }
</style>
</head>
<body>

<canvas id="sparkle-canvas"></canvas>

<div class="quiz">
  <h1>PWHL Team Personality Test‚ú®</h1>
  <img src="https://365hockeygirl.github.io/pwhl-quiz/365HGWhite.png" alt="365 Hockey Girl" style="display:block; margin: 0 auto 28px; height: 60px; width: auto;" />

  <div id="quiz-body">
    <div class="progress" id="progress"></div>
    <div class="question-num" id="q-num"></div>
    <div class="question-text" id="q-text"></div>
    <div class="options" id="q-options"></div>
    <button class="btn-next" id="btn-next" disabled onclick="next()">Next ‚Üí</button>
  </div>

  <div class="loading" id="loading" style="display:none;">
    <div class="loading-text">finding your perfect team ‚ú®</div>
    <div class="loading-sig">‚Äî 365 Hockey Girl</div>
  </div>

  <div class="result" id="result">
    <img class="result-logo" id="r-logo" src="" alt="Team logo" />
    <h2 id="r-team"></h2>
    <p id="r-desc"></p>
        <!-- SHARE BUTTONS -->
<div class="share-buttons">
  <p style="color:#fff; margin-bottom:10px;">Share your result ‚ú®</p>

  <button class="share-btn" onclick="shareBluesky()">ü¶ã Bluesky</button>
  <button class="share-btn" onclick="shareTwitter()">üê¶ Twitter</button>
  <button class="share-btn" onclick="shareSMS()">üì± Text</button>
  <button class="share-btn" onclick="copyLink()">üîó Copy link</button>
</div>
    <a class="btn-subscribe" href="https://365hockeygirl.beehiiv.com/subscribe" target="_blank" rel="noopener">subscribe to my newsletter üíå</a>
    <br><br>
    <a class="btn-subscribe" href="https://discord.gg/HSZEx8MBnh" target="_blank" rel="noopener">live game chat on discord üëæ</a>
    <br><br>
    
    <div id="r-answers" style="text-align:left; margin-bottom:24px;"></div>
    
    <!-- SOCIAL ICONS -->
<div class="social-footer">
  <a href="https://www.instagram.com/365_hockeygirl/" target="_blank" aria-label="Instagram">
    <!-- Instagram SVG -->
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7zm5 5a5 5 0 110 10 5 5 0 010-10zm6.5-.8a1.3 1.3 0 11-2.6 0 1.3 1.3 0 012.6 0zM12 9a3 3 0 100 6 3 3 0 000-6z"/>
    </svg>
  </a>

  <a href="https://www.tiktok.com/@365_hockeygirl" target="_blank" aria-label="TikTok">
    <!-- TikTok SVG -->
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M16 3c.3 1.7 1.7 3 3.5 3.2v2.3c-1.4-.1-2.7-.6-3.5-1.3v7.6a5.5 5.5 0 11-5.5-5.5c.3 0 .6 0 .9.1v2.3a3.2 3.2 0 102.3 3.1V3h2.3z"/>
    </svg>
  </a>

  <a href="https://www.youtube.com/@365HockeyGirl" target="_blank" aria-label="YouTube">
    <!-- YouTube SVG -->
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M23 7s-.2-1.6-.8-2.3c-.7-.9-1.5-.9-1.9-1C17.7 3.5 12 3.5 12 3.5h0s-5.7 0-8.3.2c-.4 0-1.2.1-1.9 1C1.2 5.4 1 7 1 7S.8 8.9.8 10.7v1.6C.8 14 .9 15.9.9 15.9s.2 1.6.8 2.3c.7.9 1.6.9 2 .9 1.5.1 6.3.2 8.3.2s6.8 0 8.3-.2c.4 0 1.2-.1 1.9-1 .6-.7.8-2.3.8-2.3s.1-1.9.1-3.7v-1.6C23.2 8.9 23 7 23 7zM9.8 14.8V8.8l5.5 3-5.5 3z"/>
    </svg>
  </a>
</div>
<br><br>
    <button class="btn-restart" onclick="restart()">Start over</button>
  </div>
</div>

<script>
const TEAMS = [
  "Seattle Torrent","Vancouver Goldeneyes","Boston Fleet","New York Sirens",
  "Minnesota Frost","Montreal Victoire","Ottawa Charge","Toronto Sceptres"
];

const LOGOS = {
  "Seattle Torrent":      "https://res.cloudinary.com/pwhl-low/image/upload/c_fill,w_624/q_auto/f_auto/SEA-t-11.4.25-logo-RGB-Lock-up-Primary_qhe8r8",
  "Vancouver Goldeneyes": "https://res.cloudinary.com/pwhl-low/image/upload/c_fill,w_624/q_auto/f_auto/VAN-GE-11.4.25-LockupDark",
  "Boston Fleet":         "https://res.cloudinary.com/pwhl-low/image/upload/c_auto,h_96/q_auto/f_auto/PWHL-Boston-Fleet-Emblem_Primary_qv37gu",
  "New York Sirens":      "https://res.cloudinary.com/pwhl-low/image/upload/c_auto,h_144/q_auto/f_auto/PWHLNewYorkSirens-Logo-Primary_blqcfe",
  "Minnesota Frost":      "https://res.cloudinary.com/pwhl-low/image/upload/c_auto,h_96/q_auto/f_auto/PWHLMinnesotaFrost-Logo-Primary_qgglsu",
  "Montreal Victoire":    "https://res.cloudinary.com/pwhl-low/image/upload/PWHL_Montreal_Victoire_Emblem_Primary-cropped_ptiglw",
  "Ottawa Charge":        "https://res.cloudinary.com/pwhl-low/image/upload/c_auto,h_144/q_auto/f_auto/OttawaChargeLogo_umto9w",
  "Toronto Sceptres":     "https://res.cloudinary.com/pwhl-low/image/upload/PWHL_Toronto_Sceptres_Emblem_Primary_qohlxz"
};

const TEAM_INFO = {
  "Seattle Torrent":      { desc: "As a Seattle Torrent fan, you‚Äôll follow Captain America herself, 5√ó Olympian Hilary Knight, into battle. You listen to grunge, KEXP, and pop-punk. Your game day hype song? Can‚Äôt Hold Us by Macklemore. Your post-game snack? Dicks Drive-In.You‚Äôll support this toothpaste team til the end.Welcome to the Show. ‚Äî 365 Hockey Girlüíñ", instagram: "https://www.instagram.com/p/DR2vozQEgOc/" },
  "Vancouver Goldeneyes": { desc: "Placeholder text Vancouver Goldeneyes", instagram: "https://www.instagram.com/p/PLACEHOLDER_VANCOUVER/" },
  "Boston Fleet":         { desc: "Placeholder text Boston Fleet", instagram: "https://www.instagram.com/p/PLACEHOLDER_BOSTON/" },
  "New York Sirens":      { desc: "Placeholder text New York Sirens", instagram: "https://www.instagram.com/p/PLACEHOLDER_NEWYORK/" },
  "Minnesota Frost":      { desc: "Placeholder text Minnesota Frost", instagram: "https://www.instagram.com/p/PLACEHOLDER_MINNESOTA/" },
  "Montreal Victoire":    { desc: "As a Montreal Victoire fan, your hero is Captain Clutch ‚Äî the GOAT, Marie-Philip Poulin. You love watching Poulin and her wife Laura Stacey light it up together, fueled by arena poutine and the electric crowd at Place Bell. Victoire is totally winning the Cup this year. ‚Äî 365 Hockey Girl üíñ", instagram: "https://www.instagram.com/p/DTG3MEBgSff" },
  "Ottawa Charge":        { desc: "As an Ottawa Charge fan, you know coach Carla Was Right About Everything. You stan goalie Gwyn Philips. You love women in uniform. Your crowd always has the best vibes, and you‚Äôll support this team through thick and thin. Welcome to the family! ‚Äî 365 Hockey Girl üíñ", instagram: "https://www.instagram.com/reel/DSeAALEjXBI" },
  "Toronto Sceptres":     { desc: "Placeholder text Toronto Sceptres", instagram: "https://www.instagram.com/p/PLACEHOLDER_TORONTO/" }
};

const questions = [
  {
    text: "Pick a food:",
    options: [
      { label: "Dessert shaped like a baseball? ‚öæ", sub: "", team: "Ottawa Charge" },
      { label: "Poutine üçü", sub: "", team: "Montreal Victoire" },
      { label: "Pizza üçï", sub: "", team: "New York Sirens" },
      { label: "Jamaican beef patty ü´ì", sub: "", team: "Toronto Sceptres" },
      { label: "Caesar salad ü•ó", sub: "", team: "Boston Fleet" },
      { label: "Hot dish ü•ò", sub: "", team: "Minnesota Frost" },
      { label: "Japadog üå≠", sub: "", team: "Vancouver Goldeneyes" },
      { label: "Dick's Drive-In üçî", sub: "", team: "Seattle Torrent" }
    ]
  },
  {
    text: "Pick a superhero:",
    options: [
      { label: "Captain America üõ°Ô∏è", sub: "", team: "Seattle Torrent" },
      { label: "Storm ‚ö°", sub: "", team: "Ottawa Charge" },
      { label: "Supergirl ‚≠ê", sub: "", team: "Toronto Sceptres" },
      { label: "Kate Bishop (Hawkeye) üèπ", sub: "", team: "Vancouver Goldeneyes" },
      { label: "Spider-Man üï∑Ô∏è", sub: "", team: "New York Sirens" },
      { label: "Hulk üíö", sub: "", team: "Boston Fleet" },
      { label: "Captain Marvel ü¶∏‚Äç‚ôÄÔ∏è", sub: "", team: "Montreal Victoire" },
      { label: "Thanos üíú", sub: "", team: "Minnesota Frost" }
    ]
  },
  {
    text: "Pick a song:",
    options: [
      { label: "Bad Reputation üé∏", sub: "Joan Jett", team: "Boston Fleet" },
      { label: "Pretty Woman üåπ", sub: "Roy Orbison", team: "Toronto Sceptres" },
      { label: "Let's Get Loud üéâ", sub: "Jennifer Lopez", team: "Vancouver Goldeneyes" },
      { label: "Empire State of Mind üóΩ", sub: "Jay-Z ft. Alicia Keys", team: "New York Sirens" },
      { label: "Misery Business üñ§", sub: "Paramore", team: "Seattle Torrent" },
      { label: "Don't Stop Me Now üöÄ", sub: "Queen", team: "Minnesota Frost" },
      { label: "C'est la vie üï∫", sub: "Khaled", team: "Montreal Victoire" },
      { label: "Gonna Celebrate ü•≥", sub: "The Phantoms", team: "Ottawa Charge" }
    ]
  },
  {
    text: "Pick a player:",
    options: [
      { label: "Hilary Knight", sub: "", team: "Seattle Torrent" },
      { label: "Sarah Nurse", sub: "", team: "Vancouver Goldeneyes" },
      { label: "Megan Keller", sub: "", team: "Boston Fleet" },
      { label: "Sarah Fillier", sub: "", team: "New York Sirens" },
      { label: "Taylor Heise", sub: "", team: "Minnesota Frost" },
      { label: "Marie-Philip Poulin", sub: "", team: "Montreal Victoire" },
      { label: "Gwyn Philips", sub: "", team: "Ottawa Charge" },
      { label: "Emma Maltais", sub: "", team: "Toronto Sceptres" }
    ]
  },
  {
    text: "Canada or USA (or neither)?",
    type: "country",
    options: [
      { label: "Y'all know I'm Canada down üçÅ", country: "canada" },
      { label: "Play Free Bird ü¶Ö", country: "usa" },
      { label: "No preference! üåç", country: "none" }
    ]
  }
];

// currentQuestion tracks which question the user is on (0-indexed)
let currentQuestion = 0;
let scores = {};
let answers = [];

function init() {
  scores = {};
  TEAMS.forEach(t => scores[t] = 0);
  answers = [];
  currentQuestion = 0;
}

function renderQuestion() {
  const q = questions[currentQuestion];

  const prog = document.getElementById('progress');
  prog.innerHTML = '';
  for (let i = 0; i < questions.length; i++) {
    const d = document.createElement('div');
    d.className = 'progress-dot' + (i < currentQuestion ? ' done' : '');
    prog.appendChild(d);
  }

  document.getElementById('q-num').textContent = 'Question ' + (currentQuestion + 1) + ' of ' + questions.length;
  document.getElementById('q-text').textContent = q.text;

  const opts = document.getElementById('q-options');
  opts.innerHTML = '';
  q.options.forEach((o, i) => {
    const btn = document.createElement('button');
    btn.className = 'opt' + (answers[currentQuestion] === i ? ' selected' : '');
    btn.innerHTML = o.label + (o.sub ? '<span class="opt-sub">' + o.sub + '</span>' : '');
    btn.onclick = () => selectOption(i);
    opts.appendChild(btn);
  });

  const nextBtn = document.getElementById('btn-next');
  nextBtn.textContent = currentQuestion === questions.length - 1 ? 'See my team ‚ú®' : 'Next ‚Üí';
  nextBtn.disabled = answers[currentQuestion] === undefined;
}

function selectOption(i) {
  answers[currentQuestion] = i;
  document.querySelectorAll('.opt').forEach((el, idx) => {
    el.classList.toggle('selected', idx === i);
  });
  document.getElementById('btn-next').disabled = false;
}

const CANADIAN_TEAMS = ["Vancouver Goldeneyes", "Montreal Victoire", "Ottawa Charge", "Toronto Sceptres"];
const US_TEAMS = ["Seattle Torrent", "Boston Fleet", "New York Sirens", "Minnesota Frost"];

function next() {
  const q = questions[currentQuestion];
  const chosen = q.options[answers[currentQuestion]];

  if (q.type === 'country') {
    // Award 2 bonus points to matching teams
    if (chosen.country === 'canada') {
      CANADIAN_TEAMS.forEach(t => scores[t] += 2);
    } else if (chosen.country === 'usa') {
      US_TEAMS.forEach(t => scores[t] += 2);
    }
    // 'none' adds no points
  } else {
    scores[chosen.team]++;
  }

  if (currentQuestion < questions.length - 1) {
    currentQuestion++;
    renderQuestion();
  } else {
    showResult();
  }
}

function showResult() {
  document.getElementById('quiz-body').style.display = 'none';
  document.getElementById('loading').style.display = 'block';

  // Reset typewriter animation so it replays
  const loadingText = document.querySelector('.loading-text');
  const loadingSig = document.querySelector('.loading-sig');
  loadingText.style.animation = 'none';
  loadingSig.style.animation = 'none';
  loadingText.offsetHeight; // force reflow
  loadingText.style.animation = '';
  loadingSig.style.animation = '';

  // Trigger sparkle rush mode
  sparkleRush = true;

  setTimeout(function() {
    // Stop rush, fade to black, show result
    sparkleRush = false;
    document.body.classList.add('result-mode');
    document.getElementById('loading').style.display = 'none';
    document.getElementById('result').style.display = 'block';

    const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
    let winner = sorted[0][0];
    // Tiebreaker: use player question (question 4, index 3)
    if (sorted[0][1] === sorted[1][1]) {
      winner = questions[3].options[answers[3]].team;
    }

    document.getElementById('r-logo').src = LOGOS[winner];
    document.getElementById('r-team').textContent = winner;
    document.getElementById('r-desc').textContent = TEAM_INFO[winner].desc;

    const igUrl = TEAM_INFO[winner].instagram;
    if (igUrl && igUrl.indexOf('PLACEHOLDER') === -1) {
      const igDiv = document.createElement('div');
      igDiv.style.cssText = 'margin:20px auto 24px;max-width:400px;border-radius:10px;overflow:hidden;background:#fff;';
      igDiv.innerHTML = '<blockquote class="instagram-media" data-instgrm-permalink="' + igUrl + '" data-instgrm-version="14" style="width:100%;margin:0;"></blockquote>';
      document.getElementById('r-answers').before(igDiv);
      if (window.instgrm) { window.instgrm.Embeds.process(); }
      else {
        const s = document.createElement('script');
        s.src = 'https://www.instagram.com/embed.js';
        s.async = true;
        document.body.appendChild(s);
      }
    }

    document.getElementById('r-answers').innerHTML = questions.map((q, i) => {
      if (q.type === 'country') return '';
      const chosen = q.options[answers[i]];
      return '<div class="answer-summary"><div class="a-label">' + q.text + '</div><div class="a-value">' + chosen.label + '</div></div>';
    }).join('');

  }, 3500);
}

function restart() {
  init();
  document.body.classList.remove('result-mode');
  document.getElementById('quiz-body').style.display = 'block';
  document.getElementById('loading').style.display = 'none';
  document.getElementById('result').style.display = 'none';
  renderQuestion();
}

init();
renderQuestion();

// ---- Sparkle animation ----
const sparkleCanvas = document.getElementById('sparkle-canvas');
const sparkleCtx = sparkleCanvas.getContext('2d');
let sparkles = [];
let sparkleRush = false;

function resizeCanvas() {
  sparkleCanvas.width = window.innerWidth;
  sparkleCanvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

function randomBetween(a, b) { return a + Math.random() * (b - a); }

function createSparkle(rush) {
  return {
    x: randomBetween(0, sparkleCanvas.width),
    y: rush ? sparkleCanvas.height + 10 : randomBetween(0, sparkleCanvas.height),
    size: rush ? randomBetween(4, 10) : randomBetween(2, 6),
    opacity: randomBetween(0.4, 1),
    speedY: rush ? randomBetween(-8, -20) : randomBetween(-0.4, -1.2),
    speedX: rush ? randomBetween(-1, 1) : randomBetween(-0.3, 0.3),
    twinkleSpeed: randomBetween(0.01, 0.03),
    twinkleDir: 1,
    shape: Math.random() > 0.5 ? 'star' : 'dot'
  };
}

for (let i = 0; i < 60; i++) sparkles.push(createSparkle(false));

function drawStar(x, y, size, opacity) {
  sparkleCtx.save();
  sparkleCtx.translate(x, y);
  sparkleCtx.globalAlpha = opacity;
  sparkleCtx.fillStyle = '#fff';
  sparkleCtx.beginPath();
  for (let i = 0; i < 4; i++) {
    const angle = (i / 4) * Math.PI * 2;
    const inner = size * 0.3;
    sparkleCtx.lineTo(Math.cos(angle) * size, Math.sin(angle) * size);
    sparkleCtx.lineTo(Math.cos(angle + Math.PI / 4) * inner, Math.sin(angle + Math.PI / 4) * inner);
  }
  sparkleCtx.closePath();
  sparkleCtx.fill();
  sparkleCtx.restore();
}

function animateSparkles() {
  sparkleCtx.clearRect(0, 0, sparkleCanvas.width, sparkleCanvas.height);

  // In rush mode, flood with extra sparkles from the bottom
  if (sparkleRush && sparkles.length < 300) {
    for (let i = 0; i < 8; i++) sparkles.push(createSparkle(true));
  } else if (!sparkleRush && sparkles.length > 60) {
    sparkles = sparkles.slice(0, 60);
  }

  sparkles.forEach(s => {
    s.opacity += s.twinkleSpeed * s.twinkleDir;
    if (s.opacity >= 1 || s.opacity <= 0.1) s.twinkleDir *= -1;
    s.y += s.speedY;
    s.x += s.speedX;
    if (s.y < -10) {
      if (sparkleRush) {
        // Remove offscreen rush sparkles
        s.y = sparkleCanvas.height + 10;
        s.x = randomBetween(0, sparkleCanvas.width);
      } else {
        s.y = sparkleCanvas.height + 10;
        s.x = randomBetween(0, sparkleCanvas.width);
      }
    }
    if (s.shape === 'star') {
      drawStar(s.x, s.y, s.size, s.opacity);
    } else {
      sparkleCtx.save();
      sparkleCtx.globalAlpha = s.opacity;
      sparkleCtx.fillStyle = '#fff';
      sparkleCtx.beginPath();
      sparkleCtx.arc(s.x, s.y, s.size / 2, 0, Math.PI * 2);
      sparkleCtx.fill();
      sparkleCtx.restore();
    }
  });
  requestAnimationFrame(animateSparkles);
}
animateSparkles();

 /* ===== SHARE FUNCTIONS ===== */

function getShareText() {
  const team = document.getElementById('r-team').textContent;
  return `I just took the PWHL Personality Quiz and got ${team}! ‚ú®`;
}

function getShareURL() {
  return window.location.href;
}

function shareTwitter() {
  const text = encodeURIComponent(getShareText());
  const url = encodeURIComponent(getShareURL());
  window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
}

function shareBluesky() {
  const text = encodeURIComponent(getShareText() + " " + getShareURL());
  window.open(`https://bsky.app/intent/compose?text=${text}`, '_blank');
}

function shareSMS() {
  const text = encodeURIComponent(getShareText() + " " + getShareURL());
  window.location.href = `sms:?&body=${text}`;
}

function copyLink() {
  const text = getShareText() + " " + getShareURL();
  navigator.clipboard.writeText(text);
  alert("Copied to clipboard!");
}
</script>
</body>
</html>
